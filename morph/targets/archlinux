#!/bin/sh

check() {
    [[ -f /etc/arch-release ]]
}

whichpkg() {
    LC_ALL=C pacman -Qo $1 | sed "s/.*is owned by //" | cut "-d " -f1
}

package() { 
    info "Creating package..."
    cd $pkgdir
    info "Generating meta..."
    cat > .PKGINFO <<HERE
# Generated by morph
pkgname = $name
pkgver = $version-$mbuild
pkgdesc = $description
builddate = $build_date
packager = $maintainer_name
size = $(du . -d0 | grep "[0-9]*" -o)
arch = $target_arch
HERE
    for item in $depends; do
        echo "depend = $item" >> .PKGINFO
    done
    pkgfile=$package_out_dir/$name-$version-$arch-$mbuild.pkg.tar.xz
    tar cJf $pkgfile .PKGINFO *
    info "Created package $pkgfile!"
}

